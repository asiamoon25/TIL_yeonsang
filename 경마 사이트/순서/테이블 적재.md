1. 경주 성적 정보 [여기서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15063979)
	* 통계 용
3. 경주기록 정보 [여기서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15058305)
	* 통계 용
4. 경주 계획표 [여기서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15056499)
	* 일정 알림페이지?
5. 확정 배당율 [여기서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15057896)
	* 통계 용
6. 경주마 성적정보 [여기서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15058779)
	* 말 개인 통계


일단 경주마 정보는 성공

### 0. 경주마 정보 

[[HorseInfo]]

horses 테이블만 적재 되있는 상태
나머지 owner 등등의 테이블도 스케줄러로 한번에 넣는걸 만들어야함.

* Parenthorses 테이블 조금 이상함.
	* horses 에 맞게 수정

_아 그냥 내가 하는게 나을듯.....;;_

**전체 테이블 수정**

```sql
CREATE TABLE horses (
    hrNo VARCHAR(6) PRIMARY KEY,
    hrNm VARCHAR(30),
    hrEngNm VARCHAR(30),
    birthDt CHAR(8),
    sex CHAR(2),
    color VARCHAR(10),
    age INT,
    prdCty VARCHAR(20),
    expCty VARCHAR(20),
    engOrgNm VARCHAR(30),
    breed VARCHAR(20),
    useNm VARCHAR(50),
    poNo VARCHAR(6),
    brNo VARCHAR(6),
    regDt CHAR(8),
    hrNmDt CHAR(8),
    hrNmChgDt CHAR(8),
    beforeHrNm VARCHAR(30),
    beforeHrEngNm VARCHAR(30),
    rhrRegDt1 CHAR(8),
    discardDt CHAR(8),
    discardUse VARCHAR(40),
    discardSellCls VARCHAR(20),
    discardRes VARCHAR(50),
    discardMon DECIMAL(16, 2),
    FInDt CHAR(8),
    FInGubun VARCHAR(20),
    FInAge INT,
    FInSex CHAR(2),
    inDt CHAR(8),
    inRes VARCHAR(20),
    inCont VARCHAR(200),
    outDt CHAR(8),
    outRes VARCHAR(20),
    outCont VARCHAR(200),
    restDt CHAR(8),
    restOutDt CHAR(8),
    restAreaNm VARCHAR(50),
    restDt2 CHAR(8),
    restOutDt2 CHAR(8),
    trainIlja CHAR(8),
    FDebutDt CHAR(8),
    LChulDt CHAR(8),
    rcCnt INT,
    fstCnt INT,
    sndCnt INT,
    trdCnt INT,
    forthCnt INT,
    fifthCnt INT,
    outCnt INT,
    amt DECIMAL(16, 2),
    condAmt DECIMAL(16, 2),
    winRate DECIMAL(5, 1),
    quinRate DECIMAL(5, 1),
    avgWinDist INT,
    rankTop INT,
    rankLast INT,
    char1 VARCHAR(70),
    char2 VARCHAR(70),
    char3 VARCHAR(70),
    char4 VARCHAR(70),
    brand1 VARCHAR(50),
    brand2 VARCHAR(50),
    brand3 VARCHAR(50),
    auctionDt CHAR(8),
    auctionYear INT,
    inChasu INT,
    auctionMon DECIMAL(16, 2),
    auctionGubun VARCHAR(20),
    auctionResult VARCHAR(10),
    auctionMgr VARCHAR(20),
    auctionOwNo VARCHAR(6),
    auctionOwNm VARCHAR(40),
    auctionOwNmSebu VARCHAR(30),
    impDt CHAR(8),
    impUse VARCHAR(10),
    doipYr INT,
    doipNo INT,
    impMon DECIMAL(16, 2),
    impGubun VARCHAR(2),
    fgnSubsidy VARCHAR(20),
    fgnAuctAmt DECIMAL(16, 2),
    fgnRcCnt INT,
    fgnFstCnt INT,
    fgnSndCnt INT,
    fgnTrdCnt INT,
    getMon DECIMAL(16, 2),
    monCd VARCHAR(16),
    fgnAvgWinDist INT,
    chgDt CHAR(8),
    sexHis VARCHAR(40),
    FUseNm VARCHAR(10),
    deadDt CHAR(8),
    stkFstCnt INT,
    stkFlag CHAR(1),
    breedGubun VARCHAR(10),
    rhrMon DECIMAL(16, 2),
    bhrMon DECIMAL(16, 2),
    bhrGubun VARCHAR(10),
    crossSubsidy VARCHAR(20),
    birthYr INT,
    bldRegYr INT,
    FInYr INT,
    rhrRegYr1 INT,
    discardYr INT,
    regYr INT,
    regOutYr INT,
    FDebutYr INT,
    FTrainYr INT,
    impYr INT,
    baljuDt CHAR(8),
    chefHrNo VARCHAR(6),
    chefHrNm VARCHAR(30),
    sanji VARCHAR(6),
    crossSupport CHAR(1),
    crossSupportPo CHAR(1),
    poip VARCHAR(10),
    discardResSebu VARCHAR(200),
    foalDiscardDt CHAR(8),
    foalDiscardRes VARCHAR(50),
    foalDiscardResSebu VARCHAR(200),
    foalDiscardUse VARCHAR(20),
    damPrdDusu INT,
    damInDusu INT,
    breedSerial INT,
    prdSerial INT,
    regOutOwNm VARCHAR(40),
    regOutOwNo VARCHAR(6),
    regOutPoNm VARCHAR(40),
    regOutPoNo VARCHAR(6),
    regOutPoArea VARCHAR(10),
    fgnCrossDate CHAR(8),
    FInMeet VARCHAR(20),
    FMeet CHAR(1),
    breedPoNm VARCHAR(40),
    breedPoArea VARCHAR(10),
    tameDate CHAR(8),
    tameCancelDate CHAR(8),
    rankGubun CHAR(1),
    tamePlace VARCHAR(20),
    tameTrainer VARCHAR(20),
    breedFarm VARCHAR(40)
);


-- 부모마 테이블
CREATE TABLE parenthorses (
    hrNo VARCHAR(6),
    parentType VARCHAR(4),
    parentNo VARCHAR(6),
    parentName VARCHAR(30),
    parentCty VARCHAR(3),
    parentYr INT,
    PRIMARY KEY (hrNo, parentType),
    FOREIGN KEY (hrNo) REFERENCES horses(hrNo)
);

-- 소유자 정보 테이블
CREATE TABLE owners (
    owNo VARCHAR(6) PRIMARY KEY,
    owName VARCHAR(40)
);

-- 조교사 정보 테이블
CREATE TABLE trainers (
    trNo VARCHAR(6) PRIMARY KEY,
    trName VARCHAR(20)
);

-- 소재지 정보 테이블
CREATE TABLE locations (
    poNo VARCHAR(6) PRIMARY KEY,
    poNm VARCHAR(40),
    poArea VARCHAR(10),
    poGubun VARCHAR(10)
);

-- 생산자 정보 테이블
CREATE TABLE breeders (
    brNo VARCHAR(6) PRIMARY KEY,
    brNm VARCHAR(40),
    brPoNm VARCHAR(40),
    brPoNo VARCHAR(6),
    brPoArea VARCHAR(10),
    brPoGubun VARCHAR(10)
);

-- 거래 정보 테이블
CREATE TABLE transactions (
    hrNo VARCHAR(6),
    transType VARCHAR(20),
    transDt CHAR(8),
    transAmount DECIMAL(16, 2),
    transDetails VARCHAR(200),
    PRIMARY KEY (hrNo, transType, transDt),
    FOREIGN KEY (hrNo) REFERENCES horses(hrNo)
);
```


### 1. 성적 정보 정리

https://www.data.go.kr/iim/api/selectAPIAcountView.do

위 사이트에서 성적 정보 스케줄러 받아서 DB에 적재

#### 테이블 정보

컬럼이 93개나 나오기 때문에 이걸 쪼개야됨.

```sql
-- 기본 정보 테이블
CREATE TABLE race_results (
    id INT AUTO_INCREMENT PRIMARY KEY,
    hrNo VARCHAR(20),
    rcDate CHAR(8),
    rcNo CHAR(2),
    age CHAR(3),
    ageCond VARCHAR(20),
    birthday CHAR(8),
    budam VARCHAR(8),
    chulNo CHAR(3),
    hrName VARCHAR(30),
    hrTool VARCHAR(100),
    ilsu CHAR(3),
    jkName VARCHAR(30),
    jkNo VARCHAR(6),
    meet VARCHAR(20),
    name VARCHAR(20),
    ord CHAR(2),
    ordBigo VARCHAR(30),
    owName VARCHAR(30),
    owNo VARCHAR(6),
    prizeCond VARCHAR(30),
    rank VARCHAR(20),
    rankRise CHAR(1),
    rating INT,
    rcDay VARCHAR(20),
    rcDist INT,
    rcName VARCHAR(200),
    rcTime DECIMAL(5,1),
    sex VARCHAR(10),
    track VARCHAR(20),
    trName VARCHAR(20),
    trNo VARCHAR(6),
    FOREIGN KEY (hrNo) REFERENCES horses(hrNo)
);

-- 시간 기록 테이블
CREATE TABLE race_times (
    id INT AUTO_INCREMENT PRIMARY KEY,
    race_result_id INT,
    bu_10_8fTime DECIMAL(5,1),
    bu_1fGTime DECIMAL(5,1),
    bu_2fGTime DECIMAL(5,1),
    bu_3fGTime DECIMAL(5,1),
    bu_4_2fTime DECIMAL(5,1),
    bu_6_4fTime DECIMAL(5,1),
    bu_8_6fTime DECIMAL(5,1),
    buG1fAccTime DECIMAL(5,1),
    buG2fAccTime DECIMAL(5,1),
    buG3fAccTime DECIMAL(5,1),
    buG4fAccTime DECIMAL(5,1),
    buG6fAccTime DECIMAL(5,1),
    buG8fAccTime DECIMAL(5,1),
    buS1fAccTime DECIMAL(5,1),
    buS1fTime DECIMAL(5,1),
    je_1cTime DECIMAL(5,1),
    je_2cTime DECIMAL(5,1),
    je_3cTime DECIMAL(5,1),
    je_4cTime DECIMAL(5,1),
    jeG1fTime DECIMAL(5,1),
    jeG3fTime DECIMAL(5,1),
    jeS1fTime DECIMAL(5,1),
    se_1cAccTime DECIMAL(5,1),
    se_2cAccTime DECIMAL(5,1),
    se_3cAccTime DECIMAL(5,1),
    se_4cAccTime DECIMAL(5,1),
    seG1fAccTime DECIMAL(5,1),
    seG3fAccTime DECIMAL(5,1),
    seS1fAccTime DECIMAL(5,1),
    FOREIGN KEY (race_result_id) REFERENCES race_results(id)
);

-- 통과 순위 테이블
CREATE TABLE race_positions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    race_result_id INT,
    buG1fOrd CHAR(2),
    buG2fOrd CHAR(2),
    buG3fOrd CHAR(2),
    buG4fOrd CHAR(2),
    buG6fOrd CHAR(2),
    buG8fOrd CHAR(2),
    buS1fOrd CHAR(2),
    sj_1cOrd DECIMAL(5,1),
    sj_2cOrd DECIMAL(5,1),
    sj_3cOrd DECIMAL(5,1),
    sj_4cOrd DECIMAL(5,1),
    sjG1fOrd DECIMAL(5,1),
    sjG3fOrd DECIMAL(5,1),
    sjS1fOrd DECIMAL(5,1),
    FOREIGN KEY (race_result_id) REFERENCES race_results(id)
);

-- 상금 및 기타 정보 테이블
CREATE TABLE race_prizes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    race_result_id INT,
    buga1 DECIMAL(12, 0),
    buga2 DECIMAL(12, 0),
    buga3 DECIMAL(12, 0),
    chaksun1 DECIMAL(12, 0),
    chaksun2 DECIMAL(12, 0),
    chaksun3 DECIMAL(12, 0),
    chaksun4 DECIMAL(12, 0),
    chaksun5 DECIMAL(12, 0),
    winOdds DECIMAL(8,1),
    plcOdds DECIMAL(8,1),
    FOREIGN KEY (race_result_id) REFERENCES race_results(id)
);

-- 주로 및 날씨 정보 테이블
CREATE TABLE race_conditions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    race_result_id INT,
    weather VARCHAR(20),
    wgBudam DECIMAL(4,1),
    wgBudamBigo CHAR(1),
    wgHr VARCHAR(20),
    wgJk DECIMAL(4,1),
    FOREIGN KEY (race_result_id) REFERENCES race_results(id)
);
```

