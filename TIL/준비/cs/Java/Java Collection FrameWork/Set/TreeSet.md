#JavaCollectionFramework  #Set 


# TreeSet


## TreeSet 이란?

*  Set 인터페이스를 구현한 클래스
* 객체를 중복해서 저장할 수 없음
* 저장 순서가 유지되지 않음
* 이진 탐색 트리(BinarySearchTree) 의 구조로 이루어져 있음.
	삭제에는 시간이 조금 더 걸리지만 정렬, 검색에 높은 성능을 보이는 자료구조임
	그래서 HashSet 보다 데이터의 추가와 삭제는 시간이 더 걸리지만 검색과 정렬에는 유리함.
* nature ordering 을 지원하며 생성자의 매개변수로 Comparator 객체를 입력하여 정렬방법을 임의로 지정해줄 수 있음. (asc, desc...)
* 저장 순서가 유지되지는 않지만 정렬된 순서를 유지함.


### 저장 순서가 유지되지는 않지만 정렬된 순서를 유지한다는게..?

Java 의 TreeSet 구현은 실제로 TreeMap 을 내부적으로 사용하여 요소를 저장하고 관리함.
![[Pasted image 20240406194359.png]]

![[Pasted image 20240406194731.png]]
TreeMap 을 까도 들어가보면 Red-Bloack Mechanics 라고 있음.

TreeSet 생성자에서 TreeMap 인스턴스를 초기화 하는 순간부터, TreeSet 에 요소를 추가, 삭제 하거나 특정 요소를 조회하는 등의 연산을 수행할 때마다 내부적으로 TreeMap 을 통해 레드-블랙 트리 로직이 실행됨.

#### 레드-블랙 트리 로직이란

* 자가 균형을 유지하는 이진 탐색 트리의 한 종류
  
* 각 노드가 추가적인 정보인 '색' 을 가지며, 빨간색 or 검은색일 수도 있음.
  
* 이 트리는 몇가지 규칙을 가지고 있음.
  
* 부모 노드 보다 작은 값을 가지는 노드는 왼쪽 자식으로, 큰 값을 가지는 노드는 오른쪽 자식으로 배치하여 데이터의 추가나 삭제 시 트리가 한쪽으로 치우쳐지지 않도록 균형을 맞춰줌. (중요)

**레드 블랙 트리 규칙**
1. 노드의 색깔은 빨간색 또는 검은색이다.
2. 루트 노드는 검은색이다.
3. 모든 리프 노드(NIL 노드) 는 검은색이다.
4. 빨간색 노드의 자식 노드들은 모두 검은색이다.(즉, 빨간색 노드는 연속될 수 없다.)
5. 각 노드로부터 해당 노드의 후손 리프 노드로 이어지는 모든 경로에는 같은 수의 검은색 노드가 존재해야한다.

**레드 블랙 트리의 연산**
* 검색 (search) : 일반 이진 탐색 트리와 마찬가지로, 레드-블랙 트리에서도 검색 연산은 효율적으로 수행됨.
* 삽입(Insertion) : 새로운 노드를 삽입한 후, 레드-블랙 트리의 규칙을 유지하기 위해 트리를 조정함. 이 과정에서 노드의 색을 변경하거나, 트리를 회전시키는 등의 작업이 수행될 수 있음.
* 삭제(Deletion) : 노드를 삭제한 후, 트리의 균형을 맞추기 위해 다양한 프로그래밍 언어와 라이브러리에서 맵,세트 등의 자료 구조의 구현 기반으로 널리 사용됨.


---

## 메소드

#### 기본 연산
* add(E e) : 지정된 요소를 세트에 추가함. 요소가 이미 존재하면 추가되지 않음.
* remove(Object o) : 지정된 요소를 세트에서 제거함.
* contains(Object o) : 세트가 지정된 요소를 포함하고 있는지 여부를 반환
* size() : 세트에 있는 요소의 수를 반환함.
* isEmpty() : 세트가 비어 있는지 여부를 검사
* clear() : 세트에서 모든 요소를 제거

#### 반복자 및 순회
* iterator() : 세트의 요소에 순차적으로 접근하는 반복자를 반환함.
* descendingIterator() : 세트의 요소에 역순으로 접근하는 반복자를 반환함.

#### 범위 검색 및 뷰
* first() : 세트에서 가장 작은(첫번째) 요소를 반환
* last() : 세트에서 가장 큰(마지막) 요소를 반환
* headSet(E toElement) : 지정된 요소보다 작은 요소들의 뷰를 반환
* tailSet(E fromElement) : 지정된 요소 이상의 요소들의 뷰를 반환함.
* subSet(E fromElement, E toElement) : 두 요소 사이의 요소들의 뷰를 반환

#### 배열변환
* toArray() : 세트의 모든 요소를 포함하는 배열을 반환
* toArray(T\[\] a) : 세트의 모든 요소를 포함하는 지정된 배열 타입의 배열을 반환
#### 비교 및 복사
* comparator() : 세트의 정렬에 사용된 비교자를 반환함. 자연 정렬을 사용하는 경우 `null` 을 반환함.

`TreeSet`은 이진 탐색 트리의 성질을 활용하여 중복 없이 요소를 저장하며, 모든 요소는 정렬된 순서를 유지함. 이러한 특성 때문에 `TreeSet`은 검색 및 정렬이 필요한 상황에서 유용하게 사용될 수 있음.