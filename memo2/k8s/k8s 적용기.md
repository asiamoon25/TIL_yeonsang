# 1. 클러스터 적용

k8s 클러스터를 구성.
이 클러스터는 프론트엔드와 백엔드 서비스를 모두 호스팅할 수 있어야 하고, 필요에 따라 두개의 별도 VPC 에 걸쳐 있을 수 있음.
각각의 VPC 내에 클러스터를 구성하거나, 하나의 큰 클러스터를 두 개의 네트워크 영역으로 나누어 관리할 수 있음.
➡️ 클라우드를 사용하면 클러스터 구성을 잘 할 수 있음.


# 2. 네임스페이스 생성
프론트엔드와 백엔드를 분리하기 위해 k8s 내에서 각각의 네임스페이스를 생성함.

네임스페이스는 k8s 리소스를 논리적으로 분리하는 방법으로, 각 애플리케이션 컴포넌트의 관리를 용이하게 해줌.

```yaml
kubectl create namespace frontend
kubectl create namespace backend
```

# 3. 배포 및 서비스 구성

프론트엔드와 백엔드 애플리케이션을 컨테이너화하고, 각각을 k8s 클러스터에 배포함.

이를 위해 Dockerfile 을 작성하여 애플리케이션을 컨테이너 이미지로 만들고, 이 이미지를 사용하여 k8s deployment 를 생성함.

프론트엔드와 백엔드 각각에 대한 서비스(Service) 를 생성하여, 내부 및 외부 트래픽을 관리함.

프론트엔드 서비스는 일반적으로 외부 요청을 받기 위해 LoadBalancer 타입을 사용할 수 있음.

백엔드 서비스는 내부적으로만 접근 가능하도록 ClusterIP 타입을 사용할 수 있음.

# 4. 인그레스 구성
외부에서 프론트엔드로의 접근을 관리하기 위해 인그레스(Ingress)를 구성함. 인그레스는 HTTP 및 HTTPS 트래픽을 클러스터 내의 서비스로 라우팅하는 규칙을 정의한다. 프론트엔드와 백엔드 간의 통신이 필요할 경우, 백엔드 서비스로의 접근을 위한 내부 라우팅 규칙을 인그레스를 통해 설정할 수 있다.

# 5. 네트워크 페어링 및 보안 설정

두 VPC가 분리되어 있는 경우, VPC 페어링 또는 다른 네트워크 연결 방식을 통해 두 네트워크 간의 연결을 구성해야 한다. 또한, 보안 그룹 및 네트워크 ACL을 통해 트래픽이 안전하게 전송될 수 있도록 보안 조치를 취한다.

# 6. 모니터링 및 로깅

클러스터의 상태를 모니터링하고, 애플리케이션의 로그를 수집하기 위해 Kubernetes의 모니터링 및 로깅 도구를 구성한다. Prometheus와 Grafana를 사용한 모니터링, Fluentd나 ELK 스택을 사용한 로깅이 일반적이다.
